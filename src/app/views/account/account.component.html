<div class="element-wrapper account-settings">
  <h6 class="element-header">Account</h6>
  <div class="element-box">
    <div class="row">
      <div class="col-lg-6 text-left">
        <h5 class="form-header" *ngIf="userService.isIndividualAccount()">{{userService.getFullName()}}</h5>
        <h5 class="form-header" *ngIf="!userService.isIndividualAccount()">{{userService.getDoingBusinessAs()}}</h5>
      </div>
    </div>
    <div class="form-desc" style="font-weight: bold;">
      <div *ngIf="userService.isDwollaVerified()" class="status-pill green" data-title="Complete" data-toggle="tooltip" 
        data-original-title="" title=""></div>
      <div *ngIf="!userService.isDwollaVerified() && userService.getDwollaStatus() != 'document'" 
        class="status-pill red" data-title="Cancelled" data-toggle="tooltip" 
        data-original-title="" title=""></div>
      <div *ngIf="!userService.isDwollaVerified() && userService.getDwollaStatus() == 'document'" 
        class="status-pill yellow" data-title="Pending" data-toggle="tooltip" data-original-title="" title=""></div>
      <span class="text-capitalize" >
        {{userService.getDwollaStatusForClient()}}
      </span>
      | 
      <span class="text-capitalize">Type: {{userService.getAccountType()}}</span><br>

      <span class="text-capitalize" *ngIf="userService.isDwollaNeedUploadBusDoc()">
        Action needed:
        <span class="badge badge-warning" 
              *ngIf="userService.isDwollaNeedControllerId() || userService.isDwollaNeedControllerIdAndBusinessDoc()">
              CONTROLLER ID
      </span>&nbsp;
      <span class="badge badge-warning" 
            *ngIf="userService.isDwollaNeedBusinessDoc() || userService.isDwollaNeedControllerIdAndBusinessDoc()">
            BUSINESS DOC
    </span>&nbsp;
    | <button (click)=openDialogModal(certifyVerifyInfoModal) class="mr-2 mb-2 btn btn-link" style="margin: 0; padding-bottom: 0" type="button">Show more</button>
  </span>
  <span class="text-capitalize" *ngIf="objAccountComp.verifyOwnerStatus || objAccountComp.certifyOwnerStatus">
        Action needed:        
        <span class="badge badge-warning" *ngIf="objAccountComp.certifyOwnerStatus">CERTIFY OWNERS </span>&nbsp;

    <a *ngIf="objAccountComp.certifyOwnerStatus" class="btn btn-success btn-sm btn-rounded" style="color: white;" (click)="certifyBeneficialOwner()">Certify</a>

    <span class="badge badge-warning" style="margin: 0" *ngIf="objAccountComp.verifyOwnerStatus">VERIFY OWNERS</span>

    | <button (click)=openDialogModal(certifyVerifyInfoModal) class="mr-2 mb-2 btn btn-link" style="margin: 0; padding-bottom: 0" type="button">Show more</button>
  </span>

</div>
<div class="os-tabs-w">
  <div class="os-tabs-controls">
    <ul class="nav nav-tabs bigger">
      <li class="nav-item">
        <a class="nav-link" id="show_tab_details" href="/account/profile">
          <!--<a class="nav-link" id="show_tab_details" href="javascript:void(0)" (click)="userService.redirectJustSimple('/account', true, {tab_name: 'details'})">-->
          Profile
        </a>
      </li>
      <li class="nav-item" *ngIf="!userService.isDwollaSuspended()">
        <a class="nav-link" id="show_tab_funding_sources" href="/account/funding_sources">
          Bank Accounts
        </a>
      </li>
      <li class="nav-item" *ngIf="!userService.isClient() && !userService.isDwollaSuspended() && !userService.isApiSandBoxMode()">
        <a class="nav-link" href="/account/billing" id="show_tab_billing">
          Billing
        </a>
      </li>
      <li class="nav-item" *ngIf="!userService.isClient() && !userService.isDwollaSuspended() && !userService.isApiSandBoxMode()">
        <a class="nav-link" href="/account/documents" id="show_tab_documents">
          Documents
        </a>
      </li>
      <!--      <li class="nav-item" *ngIf="!userService.isDwollaSuspended() && userService.isDwollaVerified() && !userService.isIndividualAccount() && userService.isController()">
                <a class="nav-link" (click)="getBeneficialOwner(userService.getDwlToken())" 
               href="/account/beneficial_owner" id="show_tab_beneficial_owner">
                Beneficial Owner
              </a>
            </li>-->
      <!--          <li class="nav-item" *ngIf="!userService.isDwollaSuspended()">
                  <a class="nav-link" href="/account/settings" id="show_tab_settings">
                    Settings
                  </a>
                </li>-->
      <li class="nav-item" *ngIf="!userService.isDwollaSuspended() && !userService.isApiSandBoxMode()">
        <a class="nav-link" href="/account/plan" id="show_tab_plan" *ngIf="userService.isMerchant() && userService.isHavePlan()">
           Plan
        </a>
      </li>
      <li class="nav-item" *ngIf="userService.isHaveApiApp()">
        <a class="nav-link" href="/account/api" id="show_tab_api">API</a>
      </li>
      <li class="nav-item" *ngIf="objAccountComp.canShowEmailSettings && !userService.isApiSandBoxMode()">
        <a class="nav-link" href="/account/email-settings" id="show_tab_email-settings">Email Settings</a>
      </li>
      <li class="nav-item" *ngIf="userService.isMerchant() && !userService.isApiSandBoxMode()">
        <a class="nav-link" href="/account/recipient-experience" id="show_tab_recipient-experience">Recipient Experience</a>
      </li>
  </ul>
</div>
<div class="tab-content">
  <div class="tab-pane" id="tab_email-settings" *ngIf="objAccountComp.canShowEmailSettings && tabName == 'email-settings'">
    <app-email-settings [u_token]="userService.getToken()"></app-email-settings>
  </div>
  <div class="tab-pane" id="tab_recipient-experience" *ngIf="userService.isMerchant() && tabName == 'recipient-experience'">
    <app-recipient-experience [u_token]="userService.getToken()"></app-recipient-experience>
  </div>
  <div class="tab-pane" id="tab_api" *ngIf="userService.isHaveApiApp() && tabName == 'api'">
    <app-api-manage [u_token]="userService.getToken()" [ext_app_id]="userService.getUserApiId()"></app-api-manage>
  </div>
  <div class="tab-pane" id="tab_billing" style="background-color: #f2f4f8; padding: 20px;" 
       *ngIf="!userService.isClient() && tabName == 'billing'">
    <app-billing [uToken]="userService.getToken()"></app-billing>
  </div>
  <div class="tab-pane active" id="tab_details" *ngIf="objUserInfo.email">
    <div class="row">
      <div class="col-lg-6" [ngClass]="{'col-lg-12': userService.isDwollaSuspended()}">
        <h6 style="display: inline-block;margin: 3px;margin-right: 14px;"><b>Contact Info</b></h6>
        <a *ngIf="!userService.isClient()" (click)="openDialog(editContactInfo)"  href="javascript:void(0)" style="font-size: 22px;color: #b0b5bb;display: inline-block;">
          <i class="picons-thin-icon-thin-0001_compose_write_pencil_new"></i>
        </a>
        <hr style="margin-top: 8px;">
        <div>
          <dl>
            <dt class="text-uppercase">First name</dt><dd class="">{{objUserInfo.first_name}}</dd>
            <dt class="text-uppercase">Last name</dt><dd class="">{{objUserInfo.last_name}}</dd>
            <dt class="text-uppercase">Phone</dt>
            <dd class="">{{conformedPhoneNumber.conformedValue}}</dd>
            <!--<dd class="">{{objUserInfo.phone || userService.getPhone()}}</dd>-->

            <dt class="text-uppercase">Email</dt><dd class="">{{objUserInfo.email}}</dd>

            <dt *ngIf="objUserInfo.address1" class="text-uppercase">Address 1</dt>
            <dd *ngIf="objUserInfo.address1" class="text-capitalize">{{objUserInfo.address1}}</dd>
            <dt *ngIf="objUserInfo.address2" class="text-uppercase">Address 2</dt>
            <dd *ngIf="objUserInfo.address2" class="text-capitalize">{{objUserInfo.address2}}</dd>

            <dt *ngIf="objUserInfo.city" class="text-uppercase">City</dt>
            <dd *ngIf="objUserInfo.city" class="text-capitalize">{{objUserInfo.city}}</dd>

            <dt *ngIf="objUserInfo.state" class="text-uppercase">State</dt>
            <dd *ngIf="objUserInfo.state" class="text-capitalize">{{objUserInfo.state}}</dd>

            <dt *ngIf="objUserInfo.postal_code" class="text-uppercase">Zip</dt>
            <dd *ngIf="objUserInfo.postal_code" class="text-capitalize">{{objUserInfo.postal_code}}</dd>

            <dt class="text-uppercase" *ngIf="!userService.isIndividualAccount() && objUserInfo.business_name">Business Name</dt>
            <dd class="text-capitalize" *ngIf="!userService.isIndividualAccount() && objUserInfo.business_name">{{objUserInfo.business_name}}</dd>

            <dt *ngIf="!userService.isIndividualAccount() && userService.getDwollaCustomer() && userService.getDwollaCustomer().business_classification" class="text-uppercase">Business<br>Classification</dt>
            <dd *ngIf="!userService.isIndividualAccount() && userService.getDwollaCustomer() && userService.getDwollaCustomer().business_classification">
              {{userService.getDwollaCustomer().business_classification}}</dd>
            
            <dt class="text-uppercase" *ngIf="!userService.isIndividualAccount() && objUserInfo.website">Website</dt>
            <dd class="" *ngIf="!userService.isIndividualAccount() && objUserInfo.website">
              <a href="{{objUserInfo.website}}" target="_blank">
                <i class="fa fa-external-link fa-lg" aria-hidden="true"></i>&nbsp;&nbsp;{{objUserInfo.website}}
              </a>
            </dd>
          </dl>
        </div>
        <div class="clearfix"></div>
        <div class="row">
          <app-settings class="col-lg-12"></app-settings>
        </div>
      </div>
      <div class="col-lg-6" *ngIf="!userService.isDwollaSuspended()">
        <div class="row" *ngIf="userService.isController()">
          <div class="col-lg-12">
            <h6 style="display: inline-block;margin: 3px"><b>Controller Info</b></h6>          
            <hr>
            <dl>
              <dt class="text-uppercase">Name</dt>
              <dd class="">{{objUserInfo.controller.firstName}} {{objUserInfo.controller.lastName}}</dd>
              
              <dt class="text-uppercase">Titile</dt>
              <dd class="">{{objUserInfo.controller.title}}</dd>

              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.address1" class="text-uppercase">Address 1</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.address1" class="text-capitalize">
                {{objUserInfo.controller.address.address1}}
              </dd>
              
              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.address2" class="text-uppercase">Address 2</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.address2" class="text-capitalize">
                {{objUserInfo.controller.address.address2}}
              </dd>
              
              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.city" class="text-uppercase">City</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.city" class="text-capitalize">
                {{objUserInfo.controller.address.city}}
              </dd>
              
              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.stateProvinceRegion" class="text-uppercase">State</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.stateProvinceRegion" class="text-capitalize">
                {{objUserInfo.controller.address.stateProvinceRegion}}
              </dd>
              
              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.country" class="text-uppercase">Country</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.country" class="text-capitalize">
                {{objUserInfo.controller.address.country}}
              </dd>
              
              <dt *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.postalCode" class="text-uppercase">Zip</dt>
              <dd *ngIf="objUserInfo.controller.address && objUserInfo.controller.address.postalCode" class="text-capitalize">
                {{objUserInfo.controller.address.postalCode}}
              </dd>
            </dl>
          </div>
        </div>
        <div *ngIf="userService.isDwollaVerified() && userService.isHaveVerifyBankAccount()" style="margin-top:5px;">
          <hr *ngIf="userService.isController()">
          <h6><b>Billing Plan</b></h6>
          <hr>
          <div *ngIf="userService.getSettings()">
            <dl>
              <dt class="text-uppercase account-billing-plan">Plan</dt>
              <dd class="text-capitalize">
                <span *ngIf="subscriptionInfo && subscriptionInfo.p_name">{{subscriptionInfo.p_name}}&nbsp;&nbsp;&nbsp; </span>
                <a (click)="_jqueryService.showPurchasePlanModal()" id="billingPlanBtn" class="btn btnUpgrade btn-rounded btn-primary" style="color: #fff;">
                  <span *ngIf="subscriptionInfo">Change Plan</span>
                  <span *ngIf="!subscriptionInfo">Buy</span>
                </a>
              </dd>
              <dt class="text-uppercase account-billing-send">Send Limit</dt>
              <dd>
                <span [ngClass]="{ 'enabledColor': !userService.getSettings().send_limit || !userService.getSettings().send_limit.Enabled}">
                  Daily - ${{userService.getSettings().send_limit.Daily  | currency: 'USD' :'' || '&nbsp;'}} <br>
                  Monthly - ${{userService.getSettings().send_limit.Monthly  | currency: 'USD' :'' || '&nbsp;'}} <br>
                  Checks - ${{userService.getSettings().send_limit.Checks | currency: 'USD' :'' || '&nbsp;'}} <br>
                </span>
                <span *ngIf="!userService.getSettings().send_limit.Enabled"> | <b>Disabled</b></span>
              </dd>
              <dt class="text-uppercase account-billing-receive">Receive Limit</dt>
              <dd>
                <span [ngClass]="{ 'enabledColor': !userService.getSettings().receive_limit || !userService.getSettings().receive_limit.Enabled}">
                  Daily - ${{userService.getSettings().receive_limit.Daily  | currency: 'USD' :'' || '&nbsp;'}} <br>
                  Monthly - ${{userService.getSettings().receive_limit.Monthly  | currency: 'USD' :'' || '&nbsp;'}} <br>
                  Invoices - ${{userService.getSettings().receive_limit.Invoices | currency: 'USD' :'' || '&nbsp;'}}<br>
                </span>
                <span *ngIf="!userService.getSettings().receive_limit.Enabled"> | <b>Disabled</b></span>
              </dd>
            </dl>
          </div>
        </div>
        <div class="clearfix"></div>
        <div style="margin-top: 10px;" *ngIf="userService.isMerchant()">
          <h6><b>Security</b></h6>
          <hr>
          <div>
            <dl>
              <dt class="text-uppercase account-billing-plan">Two Factor Authentication</dt>
              <dd class="text-capitalize">
                <a (click)="change2FAAuth()" id="_change2FAAuth" class="btn btnUpgrade btn-rounded btn-primary" style="color: #fff;">
                  <span *ngIf="userService.isEnable2FA()">Disable</span>
                  <span *ngIf="!userService.isEnable2FA()">Enable</span>
                </a>
              </dd>
            </dl>
          </div>
        </div>
        <div class="clearfix"></div>

      </div>
    </div>
    <span *ngIf="!userService.isDwollaSuspended() && userService.isDwollaVerified() 
                 && !userService.isIndividualAccount() && userService.isController()">
      <br>
      <hr>
      <h6 style="display: inline-block;margin: 0"><b>Beneficial Owner</b></h6>
      <hr>
      <br>
      <div class="row">
        <div class="col-lg-12">
          <div class="element-box-tp">
            <div>
              Ownership (Owners with 25% or greater share)
            </div>
            <div style="position: relative;margin-top: 40px;">
              <hr>
              <button class="btn btn-primary btn-rounded" type="button" title="Add"
                      style="position: absolute;padding: 15px;font-weight: bold;font-size: 20px;right: 0px;top: -28px;"
                      (click)="openDialogAddUpdateBeneficialOwner(addBeneficialOwner, null, 'add')" [disabled]="blockAddOwner">+</button>
              <!--
              <button class="btn btn-primary btn-rounded" type="button" title="The maximum number of banks have been added"
                      style="position: absolute;padding: 15px;font-weight: bold;font-size: 20px;right: 0px;top: -28px;background: #cecece;border: 1px solid #cecece;opacity: 1;"
                      (click)="openAddSourceModal(contentAddFundSource)" [disabled]="countFSBank" *ngIf="countFSBank">+</button>-->
              <div class="row">
                <div class="profile-tile col-lg-6"  *ngFor="let beneficial of lstBeneficialOwner" style="margin-top: 28px">
                     <a class="profile-tile-box" href="javascript:void(0)" style="cursor: auto">
                    <div class="pt-avatar-w" style="border-radius: 0px;">
                      <i style="color:#aab7c8; font-size: 5em;" class="picons-thin-icon-thin-0710_business_tie_user_profile_avatar_man_male"></i>
                    </div>
                  </a>
                  <div class="profile-tile-meta">
                    <ul>
                      <li>
                        <!--<div class="status-pill green" data-title="Complete" data-toggle="tooltip" data-original-title="" title="">{{statusCertifiedBeneficialOwner(beneficial.id)}}</div>-->
                        <!--<div *ngIf="!isVerified()" class="status-pill red" data-title="Cancelled" data-toggle="tooltip" data-original-title="" title=""></div>-->
                      </li>
                      <li>
                        Name:&nbsp;
                        <span style="font-weight: bold;">
                          {{beneficial.firstName}} {{beneficial.lastName}}
                        </span>
                      </li>
                      <li>
                        <span class="text-capitalize amount-green">
                          <!--{{fundSources.status}}-->
                        </span>
                        <span class="text-capitalize" style="color: #ff9800">
                          <!--{{fundSources.status}}-->
                        </span>
                      </li>
                      <li>
                        Status:&nbsp;
                        <div *ngIf="beneficial.verificationStatus == 'verified'" class="status-pill green" style="width: 9px;height: 9px;"></div>
                        <div *ngIf="beneficial.verificationStatus == 'suspended' || beneficial.verificationStatus == 'retry'" class="status-pill red" style="width: 9px;height: 9px;"></div>
                        <div *ngIf="beneficial.verificationStatus == 'document' || beneficial.verificationStatus == 'incomplete'" class="status-pill yellow" style="width: 9px;height: 9px;"></div>
                        <span style="font-weight: bold;">
                          {{beneficial.verificationStatus}}
                        </span>
                      </li>
                      <li>
                        Date:&nbsp;<span style="font-weight: bold;">
                          {{userService.getDateFormat(beneficial.created)}}
                        </span>
                      </li>
                      <li>
                        <span style="font-weight: bold;">
                          {{beneficial.address.country}}, {{beneficial.address.city}}, {{beneficial.address.stateProvinceRegion}}, {{beneficial.address.postalCode}}
                        </span>
                      </li>
                      <li>
                        Address1:&nbsp;<span style="font-weight: bold;">
                          {{beneficial.address.address1}}
                        </span>
                      </li>
                      <li *ngIf="beneficial.address.address2">
                        Address2:&nbsp;<span style="font-weight: bold;">
                          {{beneficial.address.address2}}
                        </span>
                      </li>
                    </ul>
                    <div class="pt-btn">
                      <a *ngIf="beneficial.verificationStatus == 'retry'" class="btn btn-info btn-sm btn-warning btn-rounded" style="color: white;" 
                        (click)="openDialogAddUpdateBeneficialOwner(addBeneficialOwner, beneficial, 'edit')" >Update</a>
                      <a class="btn btn-secondary btn-sm btn-rounded" style="color: white;"
                         (click)="removeBeneficialOwner(beneficial.id)">Remove</a>
                      <a class="btn btn-primary btn-sm btn-rounded" style="color: white;" 
                         (click)="prepareUploadDocForBeneficialOwner(beneficial.id)" >Upload Document</a>
                      <a class="btn btn-info btn-sm btn-rounded" style="color: white;" 
                         (click)="prepareViewDocForBeneficialOwner(beneficial.id)" >View Documents</a>                    
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </span>

  </div>

  <div class="tab-pane" id="tab_funding_sources" *ngIf="tabName=='funding_sources'">
    <app-funding-sources [objMerchant]="getCloneMerchantObject()"></app-funding-sources>
  </div>

  <div class="tab-pane" id="tab_documents">
    <button class="btn btn-primary btn-rounded btn-sm" type="button" title="Upload Documents" 
          (click)="openDialogModal(addDocumentDialog)" *ngIf="!countDocument">+ Upload Documents</button>
    <div class="form-desc" *ngIf="lstMerchantDocuments.length">            
      <table width="100%" class="table table-striped table-lightfont dataTable" role="grid" aria-describedby="dataTable1_info" style="width: 100%;">
        <thead>
          <tr role="row">
            <th>Status</th>
            <th>Document Type</th>
            <th>Comment</th>
            <th>Date</th>
            <!--<th>Action</th>-->
          </tr>
        </thead>
        <tbody>
          <tr role="row" *ngFor="let transaction of lstMerchantDocuments">
              <td class="text-capitalize" *ngIf="!transaction.failureReason">{{transaction.status}}</td>
            <td class="text-capitalize" *ngIf="transaction.failureReason">Failed Review</td>
            <td class="text-capitalize">{{transaction.type}} </td>
            <td class="text-capitalize">{{messages.get(transaction.failureReason)}} </td>
            <td>{{userService.getDateFormat(transaction.created)}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="!lstMerchantDocuments.length" class="form-desc" style="margin-top: 20px;">{{messages.get('NO_CUSTOMER_DOCUMENT')}}</div>
  </div>

  <div class="tab-pane" id="tab_beneficial_owner">
    <!--<div class="form-desc">This customer currently doesnâ€™t have any active funding sources.</div>-->
    <div class="element-box-tp">
      <div>
        Ownership (Owners with 25% or greater share)
      </div>
      <div style="position: relative;margin-top: 40px;">
        <hr>
        <button class="btn btn-primary btn-rounded" type="button" title="Add"
                style="position: absolute;padding: 15px;font-weight: bold;font-size: 20px;right: 0px;top: -28px;"
                (click)="openDialogAddUpdateBeneficialOwner(addBeneficialOwner, null, 'add')" [disabled]="blockAddOwner">+</button>
        <!--
        <button class="btn btn-primary btn-rounded" type="button" title="The maximum number of banks have been added"
                style="position: absolute;padding: 15px;font-weight: bold;font-size: 20px;right: 0px;top: -28px;background: #cecece;border: 1px solid #cecece;opacity: 1;"
                (click)="openAddSourceModal(contentAddFundSource)" [disabled]="countFSBank" *ngIf="countFSBank">+</button>-->
        <div>
          <div class="profile-tile"  *ngFor="let beneficial of lstBeneficialOwner">
               <a class="profile-tile-box" href="javascript:void(0)" style="cursor: auto">
              <div class="pt-avatar-w" style="border-radius: 0px;">
                <i style="color:#aab7c8; font-size: 5em;" class="picons-thin-icon-thin-0710_business_tie_user_profile_avatar_man_male"></i>
              </div>
            </a>
            <div class="profile-tile-meta">
              <ul>
                <li>
                  <!--<div class="status-pill green" data-title="Complete" data-toggle="tooltip" data-original-title="" title="">{{statusCertifiedBeneficialOwner(beneficial.id)}}</div>-->
                  <!--<div *ngIf="!isVerified()" class="status-pill red" data-title="Cancelled" data-toggle="tooltip" data-original-title="" title=""></div>-->
                </li>
                <li>
                  Name:&nbsp;
                  <span style="font-weight: bold;">
                    {{beneficial.firstName}} {{beneficial.lastName}}
                  </span>
                </li>
                <li>
                  <span class="text-capitalize amount-green">
                    <!--{{fundSources.status}}-->
                  </span>
                  <span class="text-capitalize" style="color: #ff9800">
                    <!--{{fundSources.status}}-->
                  </span>
                </li>
                <li>
                  Status:&nbsp;
                  <div *ngIf="beneficial.verificationStatus == 'verified'" class="status-pill green" style="width: 9px;height: 9px;"></div>
                  <div *ngIf="beneficial.verificationStatus == 'suspended' || beneficial.verificationStatus == 'retry'" class="status-pill red" style="width: 9px;height: 9px;"></div>
                  <div *ngIf="beneficial.verificationStatus == 'document'" class="status-pill yellow" style="width: 9px;height: 9px;"></div>
                  <span style="font-weight: bold;">
                    {{beneficial.verificationStatus}}
                  </span>
                </li>
                <li>
                  Date:&nbsp;<span style="font-weight: bold;">
                    {{userService.getDateFormat(beneficial.created)}}
                  </span>
                </li>
                <li>
                  <span style="font-weight: bold;">
                    {{beneficial.address.country}}, {{beneficial.address.city}}, {{beneficial.address.stateProvinceRegion}}, {{beneficial.address.postalCode}}
                  </span>
                </li>
                <li>
                  Address1:&nbsp;<span style="font-weight: bold;">
                    {{beneficial.address.address1}}
                  </span>
                </li>
                <li *ngIf="beneficial.address.address2">
                  Address2:&nbsp;<span style="font-weight: bold;">
                    {{beneficial.address.address2}}
                  </span>
                </li>
              </ul>
              <div class="pt-btn">
                <a *ngIf="beneficial.verificationStatus == 'retry'" class="btn btn-info btn-sm btn-warning btn-rounded" style="color: white;" 
                  (click)="openDialogAddUpdateBeneficialOwner(addBeneficialOwner, beneficial, 'edit')" >Update</a>
                <a class="btn btn-secondary btn-sm btn-rounded" style="color: white;"
                   (click)="removeBeneficialOwner(beneficial.id)">Remove</a>
                <a class="btn btn-primary btn-sm btn-rounded" style="color: white;" 
                   (click)="prepareUploadDocForBeneficialOwner(beneficial.id)" >Upload Document</a>
                <a class="btn btn-info btn-sm btn-rounded" style="color: white;" 
                   (click)="prepareViewDocForBeneficialOwner(beneficial.id)" >View Documents</a>                    
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!lstBeneficialOwner.length" class="form-desc">{{messages.get('NO_BENEFICIAL_OWNER')}}</div>
  </div>
  <div class="tab-pane" id="tab_settings" *ngIf="tabName=='settings'">
    <app-settings></app-settings>
  </div>
  <div class="tab-pane" id="tab_plan" *ngIf="tabName=='plan'">
    <div class="element-box" *ngIf="subscriptionInfo">
      <div class="pt-avatar-w subImg" style="border-radius: 0px;display: inline-block;margin-bottom: 10px;">
        <i class="picons-thin-icon-thin-0100_to_do_list_reminder_done"></i>
      </div>
      <div class="form-desc" style="display: inline-block;">
        <h3 class="post-title">{{subscriptionInfo.p_name}}</h3>
        <div class="plan-price text-primary">
          <span class="plan-price-symbol">$</span> 
          <span class="plan-price-value ng-binding">{{subscriptionInfo.base.amount}}</span> 
          <span class="plan-price-period">/month</span>
          <div style="display: inline-block;">        
            <a (click)="_jqueryService.showPurchasePlanModal()" class="btn btnUpgrade btn-rounded btn-primary" style="color: #fff;margin-left: 20px;">
              Change plan
            </a>
          </div>
        </div>
        <span style="color: #000">Plan Renewal Date: <b>
            <span *ngIf="subscriptionInfo.next_payment_attempt">{{userService.getDateFormat(subscriptionInfo.next_payment_attempt)}}</span></b>
        </span>
      </div>

      <div class="controls-above-table settingsLimits">
        <div class="row" *ngIf="userService.getSettings()">
          <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <div class="">
              <label style="font-size: 20px;">Send</label>
              <div>
                <ul>
                  <li><b>{{subscriptionInfo.remaining.send.num}}</b> Checks Remaining in Monthly Plan</li>
                  <li>Send Additional Checks for <b>{{subscriptionInfo.remaining.send.over | currency}}</b></li>
                  <li>Failed Payment Fee: <b>{{userService.getSettings().send_limit.failed_fee  || 10 | currency:'':'symbol'}}</b></li>
                  <li>
                    Transfer Timeline: <b>{{getTransferTimeline('send')}}</b>&nbsp;&nbsp;
                    <a href="/account/funding_sources">Balance Account</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="">
              <label  style="font-size: 20px;" for="">Receive</label>
              <div>
                <ul>
                  <li *ngIf="userService.getCountFreeReceivs() > 0 || subscriptionInfo.remaining.receive.num_free > 0">
                    <b>{{userService.getCountFreeReceivs() || subscriptionInfo.remaining.receive.num_free}}</b> Checks Remaining in Monthly Plan 
                  </li>
                  <li>Receive Checks for <b>{{subscriptionInfo.remaining.receive.verify}}% 
                      + {{userService.getSettings().receive_limit.transaction_fee || 0 | currency:'':'symbol'}}/transaction</b></li>
                  <li>Failed Payment Fee: <b>{{userService.getSettings().receive_limit.failed_fee  || 10 | currency:'':'symbol'}}</b></li>
                  <li>
                    Transfer Timeline: <b>{{getTransferTimeline('receive')}}</b>&nbsp;&nbsp;
                    <a href="/account/funding_sources">Balance Account</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <div *ngIf="userService.getSettings() && userService.objPlanLimits.limits">
              <div class="">
                <label  style="font-size: 20px;" for="">
                  Send Limit
                  <span *ngIf="!userService.getSettings().send_limit.Enabled"> | <b>Disabled</b>&nbsp;</span>
                  &nbsp;<a class="btn btn-sm btn-primary btn-rounded" href="mailto:paynote@seamlesschex.com">Request Increase</a>
                </label>
                <div>
                  <ul [ngClass]="{ 'enabledColor': !userService.getSettings().send_limit.Enabled}">
                    <li style="margin-bottom: 0px;"
                        [innerHTML]="domSanitizer.bypassSecurityTrustHtml(utility.renderLimitProgressBar('Daily', userService.objPlanLimits.limits.send_daily || 0, userService.objPlanLimits.limits.send_limit_daily))">
                    </li>
                    <li style="margin-bottom: 0px;"
                        [innerHTML]="domSanitizer.bypassSecurityTrustHtml(utility.renderLimitProgressBar('Monthly', userService.objPlanLimits.limits.send_monthly || 0, userService.objPlanLimits.limits.send_limit_monthly))">
                    </li>
                    <li style="margin-bottom: 0px;">Checks - ${{userService.getSettings().send_limit.Checks | currency: 'USD' :'' || '&nbsp;'}}</li>
                  </ul>
                </div>
              </div>
              <div class="">
                <label  style="font-size: 20px;" for="">
                  Receive Limit
                  <span *ngIf="!userService.getSettings().receive_limit.Enabled"> | <b>Disabled</b>&nbsp;</span>
                  &nbsp;<a class="btn btn-sm btn-primary btn-rounded" href="mailto:paynote@seamlesschex.com">Request Increase</a>
                </label>
                <ul [ngClass]="{ 'enabledColor': !userService.getSettings().send_limit.Enabled}">
                  <li style="margin-bottom: 0px;"
                      [innerHTML]="domSanitizer.bypassSecurityTrustHtml(utility.renderLimitProgressBar('Daily', userService.objPlanLimits.limits.receive_daily || 0, userService.objPlanLimits.limits.receive_limit_daily))">
                  </li>
                  <li style="margin-bottom: 0px;"
                      [innerHTML]="domSanitizer.bypassSecurityTrustHtml(utility.renderLimitProgressBar('Monthly', userService.objPlanLimits.limits.receive_monthly || 0, userService.objPlanLimits.limits.receive_limit_monthly))">>
                  </li>
                  <li style="margin-bottom: 0px;">Invoices - ${{userService.getSettings().receive_limit.Invoices | currency: 'USD' :'' || '&nbsp;'}}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--      <a (click)="_jqueryService.showPurchasePlanModal()" class="btn btnUpgrade btn-rounded btn-primary" style="color: #fff;">
              Change plan
            </a>-->
    </div>
  </div>

  <div class="tab-pane" id="tab_conversion"></div>
</div>
</div>
</div>
</div>


<!--*************************************************** POPUPS ******************************************************-->


<ng-template #addDocumentDialog let-c="close" let-d="dismiss">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title">Upload Document</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <form name="form" (ngSubmit)="f.form.valid && onFileChange()" #f="ngForm">
      <div class="modal-body">
        The file must be either a <i>.jpg</i>, <i>.jpeg</i>, <i>.png</i>, <i>.tif</i>, or <i>.pdf</i> up to 10MB in size.
        <div class="profile-tile">
          <span class="profile-tile-box">
            <div class="pt-avatar-w" style="border-radius: 0px;">
              <i style="color: #aab7c8; font-size: 5em;" class="icon-feather-file-text"></i>
            </div>
          </span>
          <div class="profile-tile-meta">
            <ul>
              <li>
                <div class="row">
                  <div class="col-sm-12 col-lg-12 col-md-12 col-xs-12">
                    <div class="form-group" [ngClass]="{ 'has-error has-danger': !type.valid && (type.dirty || type.touched) }">
                      <label for="">Select Document Type</label>
                      <select name="merchantDocumentType" class="form-control" placeholder="Select Document Type" 
                              required style="width: 100%"
                              [(ngModel)]="formDataDocument.type" #type="ngModel">
                        <option value="passport">Passport</option>                     
                        <option value="license">License</option>                     
                        <option value="idCard">IdCard</option>                     
                        <option value="other">Tax ID/EIN Letter/SS4</option>
                        <option value="other">Filed and stamped Articles of Organization or Incorporation</option>
                        <option value="other">Sales/Use Tax License</option>
                        <option value="other">Business License</option>
                        <option value="other">Certificate of Good Standing</option>
                        <option value="other">Other</option>
                      </select>
                      <div *ngIf="!type.valid && (type.dirty || type.touched)" 
                        class="help-block form-text with-errors form-control-feedback">
                        <span *ngIf="type.errors.required">
                          Document type is required
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="row">
                  <div class="col-sm-12">
                    <label for="payNoteDocUpload"><i class="icon-feather-download"></i> Upload Document</label>
                    <input [ngClass]="{ 'errorFileType': errorFileType || errorFileSize}" type="file" (change)="onImageChangeFromFile($event)" 
                      class="form-control" name="payNoteDocUpload" id="payNoteDocUpload" accept="application/pdf, image/*"
                      [(ngModel)]="formDataDocument.payNoteDocUpload" #payNoteDocUpload="ngModel" required>
                  </div>                
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary slick-prev slick-arrow" (click)="c('Close click')">Cancel</button>
        <button [disabled]="loading || !f.form.valid || errorFileSize" class="btn btn-primary slick-next slick-arrow">Upload</button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #viewOwnerDocuments let-c="close" let-d="dismiss">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title">Owner Documents</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div *ngIf="lstOwnerDocuments.length">            
        <table width="100%" class="table table-striped table-lightfont dataTable" role="grid" style="width: 100%;">
          <thead>
            <tr role="row">
              <th>Status</th>
              <th>Document Type</th>
              <th>Date</th>                  
            </tr>
          </thead>
          <tbody>
            <tr role="row" *ngFor="let transaction of lstOwnerDocuments">
                <td class="text-capitalize">{{transaction.status}}</td>
              <td class="text-capitalize">{{transaction.type}} </td>
              <td>{{userService.getDateFormat(transaction.created)}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="!lstOwnerDocuments.length" class="form-desc">{{messages.get('NO_OWNER_DOCUMENT')}}</div>
    </div>
    <br>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary slick-prev slick-arrow" (click)="c('Close click')">Close</button>
    </div>
  </div>
</ng-template>

<ng-template #transferToBankdDialog let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Transfer to bank</h4>
    <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
            <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="form" (ngSubmit)="f.form.valid && transferToBank()" #f="ngForm">
        <div class="modal-body">
      <div class="profile-tile">
        <span class="profile-tile-box">
          <div class="pt-avatar-w" style="border-radius: 0px;">
            <img alt="" src="assets/img/balance.svg">
          </div>
        </span>
        <div class="profile-tile-meta">
          <ul>

            <li>
              <span style="font-weight: bold;">
                {{objRemoveFSId.name}}
              </span>
            </li>
            <li>
              <span style="font-size: 20px; font-weight: bold;">
                {{objRemoveFSId.balance.value | currency:objRemoveFSId.balance.currency:'symbol'}}
              </span>
            </li>
            <li>
              ID:&nbsp;<span>{{objRemoveFSId.id}}</span>
            </li>
            <li>
              <br>
            </li>
            <li>
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label for="">Select Bank</label>
                    <select name="fundingsource_bank" class="form-control" placeholder="Select Bank" required [(ngModel)]="modelTransferToBank.fundingsource_bank" #fundingsource_bank="ngModel">
                            <option *ngFor="let state of listTansferToBank" [value]="state.id">
                        {{ state.name }}
                    </option>                     
                  </select>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-group" [ngClass]="{ 'has-error has-danger': !amount.valid && (amount.dirty || amount.touched) }">
                     <label for="">Amount</label>
                  <input name="amount" class="form-control" placeholder="Amount" type="text" required 
                         [(ngModel)]="modelTransferToBank.amount" #amount="ngModel">
                         <div *ngIf="!amount.valid && (amount.dirty || amount.touched)" 
                         class="help-block form-text with-errors form-control-feedback">
                         <span *ngIf="amount.errors.required">
                      Amount is required
                    </span>                 
                  </div>
                </div>
              </div>               
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="c('Close click')">Cancel</button>
    <button [disabled]="loading || !f.form.valid" class="btn btn-primary">Transfer to Bank</button>
  </div>
</form>
</ng-template>

<ng-template #foundingSourcesVerifiedDialog let-c="close" let-d="dismiss">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title">Please verify your account</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <form name="form" (ngSubmit)="f.form.valid && verifyFundingSourcesBank(objUserInfo.id, objRemoveFSId.id )" #f="ngForm">
          <div class="modal-body">
        <div class="profile-tile">
          <div class="profile-tile-meta" style="padding-left: 0px;">
            <ul>
              <li>
                <span class="text-initial vfs-text">
                  Please enter the two micro-deposit amounts made to your <i>{{objRemoveFSId.name}}</i> ending in 
                  <i>{{objRemoveFSId.account.number}}</i> on or around <i>{{userService.getDateFormat(objRemoveFSId.account.created_at)}}</i>
                </span>
              </li>
              <li>
                <br>
              </li>
              <li>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group" [ngClass]="{ 'has-error has-danger': !amount1.valid && (amount1.dirty || amount1.touched) }">
                         <label for="">Amount 1</label>
                      <input id="Amount1" name="amount1" class="form-control" placeholder="$0.__" type="text" required 
                             [(ngModel)]="modelVerifyFundSource.amount1" #amount1="ngModel" [textMask]="{mask: utility.maskMicroDeposit}">
                             <div *ngIf="!amount1.valid && (amount1.dirty || amount1.touched)" 
                             class="help-block form-text with-errors form-control-feedback">
                             <span *ngIf="amount1.errors.required">
                          Amount 1 is required
                        </span>
                        <!--                      <span *ngIf="amount1.errors.min">
                                                Amount 1 must be at min 0.01 USD.
                                              </span>                  -->
                      </div>
                      <span class="text-initial ex-style">ex. $0.01</span>     
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group" [ngClass]="{ 'has-error has-danger': !amount2.valid && (amount2.dirty || amount2.touched) }">
                         <label for="">Amount 2</label>
                      <input id="Amount2" name="amount2" class="form-control" placeholder="$0.__" type="text" required
                             [(ngModel)]="modelVerifyFundSource.amount2" #amount2="ngModel" [textMask]="{mask: utility.maskMicroDeposit}">
                             <div *ngIf="!amount2.valid && (amount2.dirty || amount2.touched)" 
                             class="help-block form-text with-errors form-control-feedback">
                             <span *ngIf="amount2.errors.required">
                          Amount 2 is required
                        </span>
                        <!--                      <span *ngIf="amount2.errors.min">
                                                Amount 2 must be at min 0.01 USD.
                                              </span>                  -->
                      </div>
                      <span class="text-initial ex-style">ex. $0.03</span>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <!--        <button type="button" class="btn btn-secondary" (click)="c('Close click')">Cancel</button>
                <button [disabled]="loading || !f.form.valid" class="btn btn-primary">Verify</button>
        -->
        <button class="slick-prev slick-arrow" type="button" (click)="c('Close click')">Cancel</button>
        <button [disabled]="loading || !f.form.valid" class="slick-next slick-arrow" type="submit">Verify</button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #confermDeactivationDialog let-c="close" let-d="dismiss">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title" style="padding: 10px 20px 0 20px;">Deactivate customer?</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      Are you sure you want to deactivate this customer? Any pending transactions will be cancelled. Cancelled transactions cannot be undone.
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="c('Close click')">Cancel</button>
      <button class="btn btn-primary" type="button" (click)="deactivateCustomer(objCustomer.id)">Deactivate</button>
    </div>
  </div>
</ng-template>

<ng-template #certifyVerifyInfoModal let-c="close" let-d="dismiss">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title" style="padding: 10px 20px 0 20px;">Action Needed</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>


    <div class="modal-body">
      <span *ngIf="userService.isDwollaNeedControllerId() || userService.isDwollaNeedControllerIdAndBusinessDoc()">
        <p style="padding: 0;font-weight: bold;margin-bottom: 5px;" class="text-left">Controller Documentation
          <span class="badge badge-warning" style="float: right;font-weight: normal;" >CONTROLLER ID</span>
        </p>
        <p style="padding: 0;margin-bottom: 5px;" class="text-left">A scanned photo of the Controller's identifying document can be one of the following:</p>
        <ul>
          <li>passport</li>
          <li>state issued driver's license</li>
        </ul>
      </span>
      <span *ngIf="userService.isDwollaNeedBusinessDoc() || userService.isDwollaNeedControllerIdAndBusinessDoc()">
        <p style="padding: 0;font-weight: bold;margin-bottom: 5px;" class="text-left">Business Documentation
          <span class="badge badge-warning" style="float: right;font-weight: normal;" >BUSINESS DOC</span>
        </p>
        <p style="padding: 0;margin-bottom: 5px;" class="text-left">
          Documents that are used to help identify a business can include the following:
        </p>
        <ul>
          <li><em>Partnership, General Partnership:</em> EIN Letter (IRS-issued SS4 confirmation letter).</li>
          <li><em>Limited Liability Corporation (LLC), Corporation:</em> EIN Letter (IRS-issued SS4 confirmation letter).</li>
          <li><em>Sole Proprietorship:</em> One or more of the following, as applicable to your sole proprietorship: 
            Fictitious Business Name Statement; Certificate of Assumed Name; Business License; Sales/Use Tax License; 
            Registration of Trade Name; EIN documentation (IRS-issued SS4 confirmation letter); 
            Color copy of a valid government-issued photo ID (e.g. a passport or driver's license).</li>
        </ul>
        <p class="text-left">Other business documents that are applicable includes any US government entity (federal, state, local) 
          issued business formation or licensing exhibiting the name of the business enrolling with Dwolla, or; 
          Any business formation documents exhibiting the name of the business entity in addition to being filed and stamped by a 
          US government entity. Examples include:</p>
        <ul>
          <li>Filed and stamped Articles of Organization or Incorporation</li>
          <li>Sales/Use Tax License</li>
          <li>Business License</li>
          <li>Certificate of Good Standing</li>
        </ul>
      </span>
      <span *ngIf="objAccountComp.verifyOwnerStatus">
        <p style="padding: 0;font-weight: bold;margin-bottom: 5px;" class="text-left">Owner Documentation 
          <span class="badge badge-warning" style="float: right;font-weight: normal;" >VERIFY OWNERS</span>
        </p>
        <p style="padding: 0;margin-bottom: 5px;" class="text-left">A scanned photo of the Owner's identifying document can be one of the following:</p>
        <ul>
          <li><em>U.S. Resident:</em> passport or state issued driver's license </li>
          <li><em>Non-U.S. Resident:</em> passport</li>
        </ul>
      </span>
      <span *ngIf="objAccountComp.certifyOwnerStatus">
        <p style="padding: 0;font-weight: bold;margin-bottom: 5px;" class="text-left">Certifying the Beneficial Owner(s) 
          <span style="float: right;font-weight: normal;" class="badge badge-warning">CERTIFY OWNERS</span></p>
        <p style="padding: 0;" class="text-left">In order for your business verified customer record account - business VCR - 
          to send and receive funds, the individual creating the business verified customer 
          account must certify the beneficial owner(s). The account opener must certify that 
          the information is correct in order to meet the customer due diligence rule requirements.</p>
      </span>
    </div>



    <div class="modal-footer">
      <button class="slick-prev slick-arrow" type="button" (click)="openBackModal(selectTypeAddFundingSource)">Cancel</button>
    </div>
  </div>
</ng-template>

<ng-template #editContactInfo let-c="close" let-d="dismiss" let-create="editContactInfo">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title">Update Profile Info</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <!--<div class="modal-body">-->
      <form name="form" #f="ngForm">
        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !first_name.valid && (first_name.dirty || first_name.touched)}">
                 <label for="">First Name</label>
              <input class="form-control" placeholder="First Name" type="text" [(ngModel)]="objUserInfoForUpdate.first_name" 
                     name="first_name" required #first_name="ngModel" 
                     [disabled]="userService.isDwollaDocument() || userService.isDwollaSuspended() || userService.isDwollaVerified">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="!first_name.valid && (first_name.dirty || first_name.touched)">
                     <span *ngIf="first_name.errors.required">
                  First Namel is required
                </span>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !last_name.valid && (last_name.dirty || last_name.touched)}">
                 <label for="">Last Name</label>
              <input class="form-control" placeholder="Last Name" type="text" [(ngModel)]="objUserInfoForUpdate.last_name" 
                     name="update_last_name" required #last_name="ngModel" 
                     [disabled]="userService.isDwollaDocument() || userService.isDwollaSuspended() || userService.isDwollaVerified">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="!last_name.valid && (last_name.dirty || last_name.touched)">
                     <span *ngIf="last_name.errors.required">
                  Last Name is required
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !email.valid && (email.dirty || email.touched)}">
                 <label for="">Email</label>
              <input class="form-control" placeholder="Email" type="text" [(ngModel)]="objUserInfoForUpdate.email" 
                     name="update_email" required #email="ngModel" [disabled]="true">
              <div class="help-block form-text text-muted form-control-feedback" *ngIf="!email.valid && (email.dirty || email.touched)">
                <span *ngIf="email.errors.required">Email is required</span>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !phone.valid && (phone.dirty || phone.touched)}">
              <label for="">Phone</label>
              <input appNumbers class="form-control" placeholder="Phone" type="text" required name="updatePhone"
                     [(ngModel)]="objUserInfoForUpdate.phone" [disabled]="true" #phone="ngModel">
              <div class="help-block form-text text-muted form-control-feedback" *ngIf="!phone.valid && (phone.dirty || phone.touched)">
                <span *ngIf="phone.errors.required">Phone is required</span>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !address1.valid && (address1.dirty || address1.touched)}">
                 <label for="">Address 1</label>
              <input class="form-control" placeholder="Address 1" type="text" [(ngModel)]="objUserInfoForUpdate.address1" 
                     name="update_adress" required #address1="ngModel">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="!address1.valid && (address1.dirty || address1.touched)">
                     <span *ngIf="address1.errors.required">
                  Adress is required
                </span>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !address2.valid && (address2.dirty || address2.touched)}">
                 <label for="">Address 2</label>
              <input class="form-control" placeholder="Address 2" type="text" [(ngModel)]="objUserInfoForUpdate.address2" 
                     name="update_adress2" #address2="ngModel">
            </div>
          </div>            
        </div>      

        <div class="row">
          <div class="col-sm-4">
            <div class="form-group" [ngClass]="{'has-error has-danger': !state.valid && (state.dirty || state.touched)}">
                 <label for="">State</label>
              <select style="width: 100%" id="state" [(ngModel)]="objUserInfoForUpdate.state" #state="ngModel"
                      class="form-control" name="state">
                <option *ngFor="let stateProvince of arrStates" [value]="stateProvince.abbreviation">{{ stateProvince.name }}</option>
              </select>
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="state.errors && (state.dirty || state.touched)">
                   <span *ngIf="state.errors.required">
                  State is required
                </span>
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group" [ngClass]="{'has-error has-danger': !city.valid && (city.dirty || city.touched)}">
                 <label for="">City</label>
              <input appNumbers class="form-control" placeholder="City" type="text" 
                     name="update_city" required [(ngModel)]="objUserInfoForUpdate.city" 
                     #city="ngModel" [disabled]="isVer">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="!city.valid && (city.dirty || city.touched)">
                     <span *ngIf="city.errors.required">
                  City is required
                </span>
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group" [ngClass]="{'has-error has-danger': !postal_code.valid && (postal_code.dirty || postal_code.touched)}">
                 <label for="">Zip</label>
              <input appNumbers name="postal_code" class="form-control" placeholder="Zip" type="text" required
                     [(ngModel)]="objUserInfoForUpdate.postal_code" 
                     #postal_code="ngModel" [disabled]="isVer">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="!postal_code.valid && (postal_code.dirty || postal_code.touched)">
                     <span *ngIf="postal_code.errors.required">
                  ZIP is required
                </span>
              </div>
            </div>        
          </div>        
        </div>  

        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !business_name.valid && (business_name.dirty || business_name.touched)}" 
                 *ngIf="objUserInfoForUpdate.type == 'business'">
                 <label for="">Business Name</label>
              <input appNumbers class="form-control" placeholder="Business Name" type="text" required name="updateBusinessName"
                     [(ngModel)]="objUserInfoForUpdate.business_name" 
                     #business_name="ngModel" [disabled]="true">
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="!business_name.valid && (business_name.dirty || business_name.touched)">
                   <span *ngIf="business_name.errors.required">
                  Business Name is required
                </span>
              </div>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': !website.valid && (website.dirty || website.touched)}" 
                 *ngIf="objUserInfoForUpdate.type == 'business'">
                 <label for="">Website</label>
              <input appNumbers class="form-control" placeholder="Website" type="text" name="updateWebsite"
                     [(ngModel)]="objUserInfoForUpdate.website" #website="ngModel" >
            </div>
          </div>
        </div>
      </form>
      <!--</div>-->
    </div>
    <div class="modal-footer">
      <button class="slick-prev slick-arrow" type="button" (click)="c('Close click')">Cancel</button>
      <button [disabled]="isLoading || !f.form.valid" class="slick-next slick-arrow" type="submit" (click)="updateMerchantInfo()">Update</button>
    </div>
  </div>
</ng-template>

<ng-template #addBeneficialOwner let-c="close" let-d="dismiss" let-create="addFundSources">
  <div class="modal-blue-bg onboarding-content">
    <div class="modal-header">
      <h4 class="modal-title" *ngIf="action == 'add'">Add a Beneficial Owner</h4>
      <h4 class="modal-title" *ngIf="action == 'edit'">Update a Beneficial Owner</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
              <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <form name="form" autocomplete="nope" (ngSubmit)="f.form.valid && addNewBeneficialOwner()" [formGroup]="addBeneficialFormGroup" 
          #f="ngForm" class="form-validation">
          <div class="modal-body">
        <div class="modal-body">

          <div class="row">
            <div class="col-sm-6">
              <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('firstName').errors 
                   && (addBeneficialFormGroup.get('firstName').dirty || addBeneficialFormGroup.get('firstName').touched)}">
                   <label for="">First Name</label>
                <input class="form-control" placeholder="First Name" type="text" 
                       name="firstName" formControlName="firstName" required>
                <div class="help-block form-text with-errors text-muted form-control-feedback" 
                     *ngIf="addBeneficialFormGroup.get('firstName').errors 
                     && (addBeneficialFormGroup.get('firstName').dirty || addBeneficialFormGroup.get('firstName').touched)">
                     <span *ngIf="addBeneficialFormGroup.get('firstName').errors.required">
                    First Name is required
                  </span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('lastName').errors 
                   && (addBeneficialFormGroup.get('lastName').dirty || addBeneficialFormGroup.get('lastName').touched)}">
                   <label for="">Last Name</label>
                <input class="form-control" placeholder="Last Name" type="text"
                       name="lastName" formControlName="lastName" required>
                <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="addBeneficialFormGroup.get('lastName').errors 
                     && (addBeneficialFormGroup.get('lastName').dirty || addBeneficialFormGroup.get('lastName').touched)">
                     <span *ngIf="addBeneficialFormGroup.get('lastName').errors.required">
                    Last Name is required
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-6">
              <div class="form-group dobirth" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('dateOfBirth').errors 
                   && (addBeneficialFormGroup.get('dateOfBirth').dirty || addBeneficialFormGroup.get('dateOfBirth').touched)}">
                   <label for="">Date of birth</label>
                <div style="display: inline-flex;width: 100%;">
                  <input matInput  [min]="minDate" [matDatepicker]="controllerDatepicker"  formControlName="dateOfBirth"
                         placeholder="Date Of Birth" required autocomplete="off" >
                         <mat-datepicker-toggle matSuffix [for]="controllerDatepicker"></mat-datepicker-toggle>
                  <mat-datepicker #controllerDatepicker></mat-datepicker>
                </div>
                <mat-error *ngIf="addBeneficialFormGroup.get('dateOfBirth').errors &&
                  addBeneficialFormGroup.get('dateOfBirth').dirty &&
                  addBeneficialFormGroup.get('dateOfBirth').errors.validBirthDate">
                  Must be 18 years or older
              </mat-error>
              <mat-hint align="end">MM/DD/YYYY</mat-hint>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('postalCode').errors 
                 && (addBeneficialFormGroup.get('postalCode').dirty || addBeneficialFormGroup.get('postalCode').touched)}">
                 <label for="">Zip</label>
              <input class="form-control" placeholder="Zip" type="text" name="postalCode" required formControlName="postalCode">
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('postalCode').errors
                   && (addBeneficialFormGroup.get('postalCode').dirty || addBeneficialFormGroup.get('postalCode').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('postalCode').errors.required">
                  Postal Code is required
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('address1').errors 
                 && (addBeneficialFormGroup.get('address1').dirty || addBeneficialFormGroup.get('address1').touched)}">
                 <label for="">Address 1</label>
              <input class="form-control" placeholder="Address 1" type="text" name="address1" formControlName="address1" required>
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('address1').errors
                   && (addBeneficialFormGroup.get('address1').dirty || addBeneficialFormGroup.get('address1').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('address1').errors.required">
                  Address 1 is required
                </span>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('address2').errors 
                 && (addBeneficialFormGroup.get('address2').dirty || addBeneficialFormGroup.get('address2').touched)}">
                 <label for="">Address 2</label>
              <input class="form-control" placeholder="Address 2" type="text" formControlName="address2" name="address2">                 
            </div>
          </div>
        </div>


        <div class="row">

          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('country').errors 
                 && (addBeneficialFormGroup.get('country').dirty || addBeneficialFormGroup.get('country').touched)}">
                 <label for="">Country</label>
              <select style="width: 100%" id="country" required class="form-control" name="country" 
                      formControlName="country" (ngModelChange)="changeBeneficialCountry($event)">
                <option *ngFor="let country of arrCountries" [value]="country.code">{{ country.name }}</option>
              </select>
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('country').errors
                   && (addBeneficialFormGroup.get('country').dirty || addBeneficialFormGroup.get('country').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('country').errors.required">
                  Country is required
                </span>
              </div>
            </div>
          </div>

          <div class="col-sm-6">
            <div *ngIf="isUSA" class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('stateProvinceRegion').errors 
              && (addBeneficialFormGroup.get('stateProvinceRegion').dirty || addBeneficialFormGroup.get('stateProvinceRegion').touched)}">
              <label for="">State Province Region</label>
              <select style="width: 100%" id="stateProvinceRegion" required 
                      class="form-control" name="stateProvinceRegion" formControlName="stateProvinceRegion">
                <option *ngFor="let state of arrStates" [value]="state.abbreviation">{{ state.name }}</option>
              </select>
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('stateProvinceRegion').errors
                   && (addBeneficialFormGroup.get('stateProvinceRegion').dirty || addBeneficialFormGroup.get('stateProvinceRegion').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('stateProvinceRegion').errors.required">
                  State Province Region is required
                </span>
              </div>
            </div>
            <div *ngIf="!isUSA" class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('stateProvinceRegionNotUS').errors 
              && (addBeneficialFormGroup.get('stateProvinceRegionNotUS').dirty || addBeneficialFormGroup.get('stateProvinceRegionNotUS').touched)}">
              <label for="">State Province Region <i class="fa fa-question-circle" [matTooltipPosition]="'above'" [matTooltipShowDelay]="100"
                                                   matTooltip="{{messages.get('TOOLTIP_STATE_PROVINCE_REGION')}}"></i></label>
              <!--              <select style="width: 100%" id="stateProvinceRegionNotUS" required 
                                    class="form-control" name="stateProvinceRegionNotUS" formControlName="stateProvinceRegionNotUS">
                              
                              <option *ngFor="let state of arrStates" [value]="state.abbreviation">{{ state.name }}</option>
                            </select>-->
              <input class="form-control" id="stateProvinceRegionNotUS" placeholder="State Province Region" type="text" 
                     name="stateProvinceRegionNotUS" required formControlName="stateProvinceRegionNotUS">
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('stateProvinceRegionNotUS').errors
                   && (addBeneficialFormGroup.get('stateProvinceRegionNotUS').dirty || addBeneficialFormGroup.get('stateProvinceRegionNotUS').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('stateProvinceRegionNotUS').errors.required">
                  State Province Region is required
                </span>
              </div>
            </div>
          </div>
          <!--        </div>
          
                  <div class="row">-->
          <div class="col-sm-6">
            <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('city').errors 
                 && (addBeneficialFormGroup.get('city').dirty || addBeneficialFormGroup.get('city').touched)}">
                 <label for="">City</label>
              <input class="form-control" placeholder="City" type="text" name="city" required formControlName="city">
              <div class="help-block form-text text-muted form-control-feedback" 
                   *ngIf="addBeneficialFormGroup.get('city').errors
                   && (addBeneficialFormGroup.get('city').dirty || addBeneficialFormGroup.get('city').touched)">
                   <span *ngIf="addBeneficialFormGroup.get('city').errors.required">
                  City is required
                </span>
              </div>
            </div>
          </div>

          <div class="col-sm-6">
            <div  *ngIf="isUSA" class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('ssn').errors 
              && (addBeneficialFormGroup.get('ssn').dirty || addBeneficialFormGroup.get('ssn').touched)}">
              <label for="">Ssn</label>
              <input class="form-control" placeholder="Ssn" type="text" 
                     name="ssn" formControlName="ssn" required [textMask]="{mask: utility.maskFullSsn}">
                     <div class="help-block form-text text-muted form-control-feedback" 
                     *ngIf="addBeneficialFormGroup.get('ssn').errors
                     && (addBeneficialFormGroup.get('ssn').dirty || addBeneficialFormGroup.get('ssn').touched)">
                     <span *ngIf="addBeneficialFormGroup.get('ssn').errors.required">
                  Ssn is required
                </span>
              </div>
            </div>
          </div>

        </div>

        <div class="row" *ngIf="!isUSA">
          <fieldset class="col-sm-12 col-xs-12 fsmargin">
            <legend><span>Beneficial passport</span></legend>
            <div class="row">
              <div class="col-sm-6">
                <div   class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('number').errors 
                       && (addBeneficialFormGroup.get('number').dirty || addBeneficialFormGroup.get('number').touched)}">
                       <label for="">Passport number</label>
                  <input class="form-control" placeholder="Passport number" type="text" 
                         name="number" formControlName="number" required>
                  <div class="help-block form-text text-muted form-control-feedback" 
                       *ngIf="addBeneficialFormGroup.get('number').errors
                       && (addBeneficialFormGroup.get('number').dirty || addBeneficialFormGroup.get('number').touched)">
                       <span *ngIf="addBeneficialFormGroup.get('number').errors.required">
                      Passport number is required
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-group" [ngClass]="{'has-error has-danger': addBeneficialFormGroup.get('countryPassport').errors 
                     && (addBeneficialFormGroup.get('countryPassport').dirty || addBeneficialFormGroup.get('countryPassport').touched)}">
                     <label for="">Passport country</label>
                  <select style="width: 100%" id="countryPassport" required class="form-control" name="countryPassport" formControlName="countryPassport">
                    <option *ngFor="let country of arrCountriesPassport" [value]="country.code">{{ country.name }}</option>
                  </select>
                  <div class="help-block form-text text-muted form-control-feedback" 
                       *ngIf="addBeneficialFormGroup.get('countryPassport').errors
                       && (addBeneficialFormGroup.get('countryPassport').dirty || addBeneficialFormGroup.get('countryPassport').touched)">
                       <span *ngIf="addBeneficialFormGroup.get('countryPassport').errors.required">
                      Country is required
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="slick-prev slick-arrow" (click)="c('Close click')">Cancel</button>
      <button [disabled]="isLoading || !addBeneficialFormGroup.valid" *ngIf="action == 'add'" class="slick-next slick-arrow">Confirm & Create</button>
      <button [disabled]="isLoading || !addBeneficialFormGroup.valid" *ngIf="action == 'edit'" class="slick-next slick-arrow">Update & Create</button>
    </div>
  </form>
</div>
</ng-template>
